<%- include('partials/header') %>

<!-- Hero Section -->
<section class="hero">
  <div class="hero-content">
    <div class="profile-picture">
      <a href="https://wa.me/970595014779" target="_blank">
        <img src="/pictuers/Me.jpg" alt="Jihade Shtayyeh">
      </a>
    </div>
    <h1>جِهاد اشتيه</h1>
    <h2 id="age-display">Loading age...</h2>
    <h2>Software Engineering Student</h2>
    <p>An Najah National University</p>
    <div class="university-logo">
      <a href="https://www.najah.edu/en/" target="_blank">
        <img src="/pictuers/An-najah.png" alt="An-Najah National University Logo">
      </a>
    </div>
  </div>
</section>

<!-- Research Section -->
<section class="research-showcase">
  <div class="container">
    <h2>My Research</h2>
    <div class="research-grid">
      <% researchEntries.slice(0, 3).forEach(research => { %> <!-- Limit to 3 items -->
        <div class="research-card">
          <div class="pdf-cover">
            <% if (research.thumbnailFileId) { %>
              <!-- GridFS thumbnail takes priority -->
              <img src="/files/<%= research.thumbnailFileId %>" alt="<%= research.title %> Preview" class="pdf-thumbnail">
            <% } else if (research.thumbnailUrl) { %>
              <img src="/<%= research.thumbnailUrl %>" alt="<%= research.title %> Preview" class="pdf-thumbnail">
            <% } else { %>
              <div class="pdf-placeholder">
                <i class="fas fa-file-pdf"></i>
                <span><%= research.title %></span>
              </div>
            <% } %>
          </div>
          <h3 class="research-title"><%= research.title %></h3>
          <p class="research-description"><%= research.description %></p>
          <div class="research-links">
            <% if (research.pdfFileId) { %>
              <!-- GridFS PDF (priority) -->
              <a href="/research/pdf/<%= research.pdfFileId %>?dl=1" class="btn-link">
                <i class="fas fa-download"></i> Download PDF
              </a>
              <a href="/research/pdf/<%= research.pdfFileId %>" target="_blank" class="btn-view">
                <i class="fas fa-eye"></i> View
              </a>
            <% } else if (research.researchPdf) { %>
              <!-- Legacy/local file fallback -->
              <a href="/<%= research.researchPdf %>" target="_blank" class="btn-link">
                <i class="fas fa-download"></i> Download PDF
              </a>
              <a href="/<%= research.researchPdf %>" target="_blank" class="btn-view">
                <i class="fas fa-eye"></i> View
              </a>
            <% } %>
          </div>
        </div>
      <% }); %>
    </div>
    <div class="research-more">
      <a href="/myresearch" class="btn-research-more">View All Research <i class="fas fa-arrow-right"></i></a>
    </div>
  </div>
</section>
<!-- Featured Projects Section -->
<section class="research-showcase">
  <div class="container">
    <h2>Featured Projects</h2>
    <div class="projects-grid">
      <% projects.slice(0, 3).forEach(project => { %> <!-- Limit to 3 items -->
        <div class="project-card">
          <h3><%= project.title %></h3>
          <p><%= project.description %></p>

          <% if (project.videoFileId) { %>
            <!-- GridFS video -->
            <div class="video-container">
              <video controls class="project-video">
                <source src="/projects/video/<%= project.videoFileId %>" type="video/mp4">
                Your browser does not support the video tag.
              </video>
            </div>
          <% } else if (project.videoUrl) { %>
            <!-- External video -->
            <div class="video-container">
              <iframe src="<%= project.videoUrl %>" allowfullscreen></iframe>
            </div>
          <% } %>

          <div class="project-links">
            <% if (project.githubUrl) { %>
              <a href="<%= project.githubUrl %>" target="_blank">GitHub</a>
            <% } %>
            <% if (project.projectUrl) { %>
              <a href="<%= project.projectUrl %>" target="_blank">Live Demo</a>
            <% } %>
          </div>
        </div>
      <% }); %>
      <div class="research-more">
        <a href="/projects" class="btn-research-more">View All Projects <i class="fas fa-arrow-right"></i></a>
      </div>
    </div>
  </div>
</section>

<script src="/js/ageCalculator.js"></script>

<%- include('partials/footer') %>
